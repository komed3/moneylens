let data={},debounceTimeout=null;function formatNumber(t,a=0,e=0){return Number(t).toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:a})}function animateValue(t,a,e=0,n=600){const i=document.querySelector(`[data-item="${t}"]`);if(i){const t=parseFloat(i.dataset.value)||0,c=performance.now(),o=a-t;requestAnimationFrame((function m(u){const _=u-c,r=Math.min(_/n,1),d=t+o*r;i.textContent=formatNumber(d,e,e),i.dataset.value=d,r<1?requestAnimationFrame(m):(i.dataset.value=a,i.textContent=formatNumber(a,e,e))}))}}function insertDataValues(t){document.querySelectorAll("[data-info]").forEach((a=>{const e=a.getAttribute("data-info");e in t&&(a.textContent=formatNumber(t[e],2,0))}))}function handleInput(t){const a=t.target;let e=a.value.replace(/[^\d]/g,"");e=e.replace(/^0+/,""),e||(e=0);const n=formatNumber(e);a.value=n,calculate_metrics(e)}function calculate_metrics(t){clearTimeout(debounceTimeout),debounceTimeout=setTimeout((()=>{calc_metric__gold(t),calc_metric__coins(t),calc_metric__diamond(t),calc_metric__savings(t)}),300)}function calc_metric__gold(t){const a=t/data.gold_price,e=a/19.32,n=2*Math.cbrt(3*e/(4*Math.PI));animateValue("__gold_weight",a,3),animateValue("__gold_diameter",n,3)}function calc_metric__coins(t){const a=t*data.coin_weight/1e3,e=t*data.coin_height/100,n=t*Math.PI*Math.pow(data.coin_diameter/2,2)*2.4711e-8;animateValue("__coins_weight",a,3),animateValue("__coins_hight",e,3),animateValue("__coins_area",n,3)}function calc_metric__diamond(t){animateValue("__diamond_carat",t/data.diamond_carat,3)}function calc_metric__savings(t){const a=t/data.savings,e=t/(data.income/12);animateValue("__household_savings",a,3),animateValue("__household_income",e,3)}document.addEventListener("DOMContentLoaded",(()=>{fetch("./data.json").then((t=>t.json())).then((t=>{data=t,insertDataValues(data)})).catch((t=>{}));const t=document.getElementById("input");t&&t.addEventListener("input",handleInput)}));
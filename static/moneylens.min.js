let data={},debounceTimeout=null;function formatNumber(a,e=0,t=0){return Number(a).toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:e})}function animateValue(a,e,t=0,n=600){const _=document.querySelector(`[data-item="${a}"]`);if(_){const a=parseFloat(_.dataset.value)||0,c=performance.now(),i=e-a;requestAnimationFrame((function o(l){const r=l-c,m=Math.min(r/n,1),u=a+i*m;_.textContent=formatNumber(u,t,t),_.dataset.value=u,m<1?requestAnimationFrame(o):(_.dataset.value=e,_.textContent=formatNumber(e,t,t))}))}}function insertDataValues(a){document.querySelectorAll("[data-info]").forEach((e=>{const t=e.getAttribute("data-info");t in a&&(e.textContent=formatNumber(a[t],2,0))}))}function handleInput(a){const e=a.target;let t=e.value.replace(/[^\d]/g,"");t=t.replace(/^0+/,""),t||(t=0);const n=formatNumber(t);e.value=n,calculate_metrics(t)}function calculate_metrics(a){clearTimeout(debounceTimeout),debounceTimeout=setTimeout((()=>{calc_metric__gold(a),calc_metric__coins(a),calc_metric__diamond(a),calc_metric__savings(a),calc_metric__interest(a),calc_metric__expenses(a),calc_metric__burger(a),calc_metric__gwr(a),calc_metric__hardware(a),calc_metric__oil(a),calc_metric__btc(a),calc_metric__work(a),calc_metric__global(a),calc_metric__giving(a),calc_metric__bin(a)}),300)}function calc_metric__gold(a){const e=a/data.gold_price,t=e/19.32,n=2*Math.cbrt(3*t/(4*Math.PI));animateValue("__gold_weight",e,3),animateValue("__gold_diameter",n,3)}function calc_metric__coins(a){const e=a*data.coin_weight/1e6,t=a*data.coin_height/1e5,n=a/(4462272e3/Math.pow(data.coin_diameter,2));animateValue("__coins_weight",e,3),animateValue("__coins_height",t,3),animateValue("__coins_fields",n,3)}function calc_metric__diamond(a){animateValue("__diamond_carat",a/data.diamond_carat,3)}function calc_metric__savings(a){const e=a/data.savings,t=a/(data.income/12);animateValue("__household_savings",e,3),animateValue("__household_income",t,3)}function calc_metric__interest(a){const e=a*Math.pow(1+data.interest/100,(new Date).getFullYear()),t=e/(1e6*data.gold_price);animateValue("__interest_cash",e/1e12,0),animateValue("__interest_gold",t/1e9,0)}function calc_metric__expenses(a){const e=a/data.expenses_us,t=a/data.expenses_de,n=a/data.expenses_ch,_=a/data.expenses_in,c=a/data.expenses_pk;animateValue("__expenses_us",e,0),animateValue("__expenses_de",t,0),animateValue("__expenses_ch",n,0),animateValue("__expenses_in",_,0),animateValue("__expenses_pk",c,0)}function calc_metric__burger(a){animateValue("__burger_amount",a/data.burger,0)}function calc_metric__gwr(a){const e=Math.max(0,Math.min(100,100-100/(1+Math.pow(Math.E,-1.3*(Math.log(a)-10))))),t=data.population/100*e;animateValue("__gwr_pct",e,2),animateValue("__gwr_rank",t,0)}function calc_metric__hardware(a){const e=a/data.gpu,t=a/data.iphone,n=a/data.console;animateValue("__hardware_gpu",e,0),animateValue("__hardware_iphone",t,0),animateValue("__hardware_console",n,0)}function calc_metric__oil(a){animateValue("__oil_barrel",a/data.crude_oil,3)}function calc_metric__btc(a){animateValue("__btc_amount",a/data.btc,3)}function calc_metric__work(a){const e=a/data.fed_wage,t=e/160;animateValue("__work_hrs",e,0),animateValue("__work_months",t,0)}function calc_metric__global(a){animateValue("__global_wealth",100*a/data.global_wealth,10)}function calc_metric__giving(a){const e=a/data.tree,t=a/data.forest_sqft;animateValue("__giving_tree",e,0),animateValue("__giving_forest",t,0)}function calc_metric__bin(a){animateValue("__money_bin",100*a/data.money_bin,8)}document.addEventListener("DOMContentLoaded",(()=>{fetch("./data.json").then((a=>a.json())).then((a=>{data=a,insertDataValues(data)})).catch((a=>{}));const a=document.getElementById("input");a&&a.addEventListener("input",handleInput)}));
let data={},debounceTimeout=null;function formatNumber(e,a=0,t=0){return Number(e).toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:a})}function animateValue(e,a,t=0,n=600){const c=document.querySelector(`[data-item="${e}"]`);if(c){const e=parseFloat(c.dataset.value)||0,i=performance.now(),_=a-e;requestAnimationFrame((function o(u){const m=u-i,s=Math.min(m/n,1),r=e+_*s;c.textContent=formatNumber(r,t,t),c.dataset.value=r,s<1?requestAnimationFrame(o):(c.dataset.value=a,c.textContent=formatNumber(a,t,t))}))}}function insertDataValues(e){document.querySelectorAll("[data-info]").forEach((a=>{const t=a.getAttribute("data-info");t in e&&(a.textContent=formatNumber(e[t],2,0))}))}function handleInput(e){const a=e.target;let t=a.value.replace(/[^\d]/g,"");t=t.replace(/^0+/,""),t||(t=0);const n=formatNumber(t);a.value=n,calculate_metrics(t)}function calculate_metrics(e){clearTimeout(debounceTimeout),debounceTimeout=setTimeout((()=>{calc_metric__gold(e),calc_metric__coins(e),calc_metric__diamond(e),calc_metric__savings(e),calc_metric__expenses(e),calc_metric__burger(e)}),300)}function calc_metric__gold(e){const a=e/data.gold_price,t=a/19.32,n=2*Math.cbrt(3*t/(4*Math.PI));animateValue("__gold_weight",a,3),animateValue("__gold_diameter",n,3)}function calc_metric__coins(e){const a=e*data.coin_weight/1e3,t=e*data.coin_height/100,n=e*Math.PI*Math.pow(data.coin_diameter/2,2)*2.4711e-8;animateValue("__coins_weight",a,3),animateValue("__coins_hight",t,3),animateValue("__coins_area",n,3)}function calc_metric__diamond(e){animateValue("__diamond_carat",e/data.diamond_carat,3)}function calc_metric__savings(e){const a=e/data.savings,t=e/(data.income/12);animateValue("__household_savings",a,3),animateValue("__household_income",t,3)}function calc_metric__expenses(e){const a=e/data.expenses_us,t=e/data.expenses_de,n=e/data.expenses_ch,c=e/data.expenses_in,i=e/data.expenses_pk;animateValue("__expenses_us",a,0),animateValue("__expenses_de",t,0),animateValue("__expenses_ch",n,0),animateValue("__expenses_in",c,0),animateValue("__expenses_pk",i,0)}function calc_metric__burger(e){animateValue("__burger_amount",e/data.burger,0)}document.addEventListener("DOMContentLoaded",(()=>{fetch("./data.json").then((e=>e.json())).then((e=>{data=e,insertDataValues(data)})).catch((e=>{}));const e=document.getElementById("input");e&&e.addEventListener("input",handleInput)}));